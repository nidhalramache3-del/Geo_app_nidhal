<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GeoPro Ultra</title>
    <link rel="manifest" href="manifest.json">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #0ea5e9;
            --secondary: #10b981;
            --accent: #f59e0b;
            --purple: #8b5cf6;
            --danger: #ef4444;
            --bg-dark: #0f172a;
            --bg-card: #1e293b;
            --bg-input: #334155;
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
        }

        /* Language Selector */
        .lang-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .lang-screen.hidden {
            display: none;
        }

        .lang-title {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            text-align: center;
        }

        .lang-subtitle {
            font-size: 1.2rem;
            color: rgba(255,255,255,0.8);
            margin-bottom: 3rem;
            text-align: center;
        }

        .lang-options {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            width: 90%;
            max-width: 400px;
        }

        .lang-btn {
            padding: 1.5rem;
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 16px;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .lang-btn:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-2px);
        }

        /* Main App */
        .app-container {
            display: none;
        }

        .app-container.active {
            display: block;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            padding: 1.5rem 1rem;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header h1 {
            font-size: 1.8rem;
            margin-bottom: 0.3rem;
        }

        .header p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Navigation */
        .nav-tabs {
            display: flex;
            background: var(--bg-card);
            padding: 0.5rem;
            gap: 0.5rem;
            overflow-x: auto;
            position: sticky;
            top: 80px;
            z-index: 99;
        }

        .nav-tab {
            flex: 1;
            min-width: 80px;
            padding: 1rem;
            background: transparent;
            border: none;
            border-radius: 12px;
            color: var(--text-secondary);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .nav-tab.active {
            background: var(--primary);
            color: white;
        }

        /* Tab Content */
        .tab-content {
            display: none;
            padding: 1rem;
            padding-bottom: 100px;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Cards */
        .card {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border: 1px solid var(--bg-input);
        }

        .card-title {
            font-size: 1.2rem;
            color: var(--primary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Inputs */
        .input-group {
            margin-bottom: 1rem;
        }

        .input-label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .input-field {
            width: 100%;
            padding: 1rem;
            background: var(--bg-input);
            border: 2px solid transparent;
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 1rem;
            transition: all 0.3s;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* Buttons */
        .btn {
            width: 100%;
            padding: 1rem;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-secondary {
            background: var(--secondary);
            color: white;
        }

        .btn-accent {
            background: var(--accent);
            color: white;
        }

        .btn-purple {
            background: var(--purple);
            color: white;
        }

        /* Results */
        .result-box {
            background: linear-gradient(135deg, var(--primary), #0284c7);
            padding: 1.5rem;
            border-radius: 16px;
            margin-top: 1rem;
            text-align: center;
        }

        .result-value {
            font-size: 2rem;
            font-weight: bold;
            font-family: monospace;
        }

        .result-label {
            color: rgba(255,255,255,0.8);
            margin-top: 0.5rem;
        }

        /* Method Selector */
        .method-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .method-btn {
            padding: 1rem;
            background: var(--bg-input);
            border: 2px solid transparent;
            border-radius: 12px;
            color: var(--text-secondary);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .method-btn.active {
            border-color: var(--primary);
            color: var(--primary);
            background: rgba(14, 165, 233, 0.1);
        }

        /* Formula Display */
        .formula-box {
            background: rgba(14, 165, 233, 0.1);
            border: 1px solid var(--primary);
            border-radius: 12px;
            padding: 1rem;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
            text-align: center;
            color: var(--primary);
        }

        /* Chart Container */
        .chart-container {
            background: var(--bg-input);
            border-radius: 12px;
            padding: 1rem;
            height: 300px;
            margin-top: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
        }

        /* AI Section */
        .ai-upload {
            border: 2px dashed var(--purple);
            border-radius: 16px;
            padding: 2rem;
            text-align: center;
            margin-bottom: 1rem;
        }

        .ai-result {
            background: linear-gradient(135deg, var(--purple), #7c3aed);
            padding: 1.5rem;
            border-radius: 16px;
            margin-top: 1rem;
        }

        /* Loading */
        .loading {
            display: none;
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255,255,255,0.1);
            border-left-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 1rem auto;
        }

        .loading.active {
            display: block;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Responsive */
        @media (min-width: 768px) {
            .method-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- Language Selector -->
    <div class="lang-screen" id="langScreen">
        <h1 class="lang-title">ğŸŒ GeoPro Ultra</h1>
        <p class="lang-subtitle">Ø§Ø®ØªØ± Ù„ØºØªÙƒ | Choose Language | Choisissez</p>
        <div class="lang-options">
            <button class="lang-btn" onclick="setLanguage('ar')">
                ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
            </button>
            <button class="lang-btn" onclick="setLanguage('en')">
                ğŸ‡¬ğŸ‡§ English
            </button>
            <button class="lang-btn" onclick="setLanguage('fr')">
                ğŸ‡«ğŸ‡· FranÃ§ais
            </button>
        </div>
    </div>

    <!-- Main App -->
    <div class="app-container" id="appContainer">
        <!-- Header -->
        <header class="header">
            <h1 id="appTitle">GeoPro Ultra</h1>
            <p id="appSubtitle">Ø§Ù„Ù…Ø®ØªØ¨Ø± Ø§Ù„Ø¬ÙŠÙˆÙÙŠØ²ÙŠØ§Ø¦ÙŠ Ø§Ù„Ø°ÙƒÙŠ</p>
        </header>

        <!-- Navigation -->
        <nav class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('electrical')" data-i18n="nav.electrical">
                âš¡ ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ
            </button>
            <button class="nav-tab" onclick="showTab('gravity')" data-i18n="nav.gravity">
                ğŸŒ Ø¬Ø§Ø°Ø¨ÙŠØ©
            </button>
            <button class="nav-tab" onclick="showTab('ai')" data-i18n="nav.ai">
                ğŸ¤– Ø°ÙƒØ§Ø¡
            </button>
            <button class="nav-tab" onclick="showTab('formulas')" data-i18n="nav.formulas">
                ğŸ“ Ù…Ø¹Ø§Ø¯Ù„Ø§Øª
            </button>
        </nav>

        <!-- Electrical Tab -->
        <div id="electrical-tab" class="tab-content active">
            <div class="card">
                <h2 class="card-title">âš¡ <span data-i18n="electrical.title">Ø§Ù„Ø·Ø±Ù‚ Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©</span></h2>
                
                <div class="method-grid">
                    <button class="method-btn active" onclick="setElectricalMethod('wenner')">Wenner</button>
                    <button class="method-btn" onclick="setElectricalMethod('schlumberger')">Schlumberger</button>
                    <button class="method-btn" onclick="setElectricalMethod('dipole')">Dipole-Dipole</button>
                    <button class="method-btn" onclick="setElectricalMethod('pole')">Pole-Pole</button>
                </div>

                <div class="formula-box" id="electricalFormula">
                    K = 2Ï€a
                </div>

                <div class="input-group">
                    <label class="input-label" data-i18n="electrical.spacing">Ø§Ù„Ù…Ø³Ø§ÙØ© a (Ù…ØªØ±)</label>
                    <input type="number" class="input-field" id="elecSpacing" value="10" step="0.1">
                </div>

                <div class="input-group">
                    <label class="input-label" data-i18n="electrical.current">Ø§Ù„ØªÙŠØ§Ø± I (mA)</label>
                    <input type="number" class="input-field" id="elecCurrent" value="100" step="1">
                </div>

                <div class="input-group">
                    <label class="input-label" data-i18n="electrical.voltage">Ø§Ù„Ø¬Ù‡Ø¯ V (mV)</label>
                    <input type="number" class="input-field" id="elecVoltage" value="50" step="0.1">
                </div>

                <button class="btn btn-primary" onclick="calculateElectrical()">
                    ğŸ§® <span data-i18n="electrical.calculate">Ø§Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‚Ø§ÙˆÙ…ÙŠØ©</span>
                </button>

                <div class="loading" id="electricalLoading"></div>

                <div class="result-box" id="electricalResult" style="display: none;">
                    <div class="result-value" id="resistivityValue">---</div>
                    <div class="result-label" data-i18n="electrical.result">Î©.m Ø§Ù„Ù…Ù‚Ø§ÙˆÙ…ÙŠØ© Ø§Ù„Ø¸Ø§Ù‡Ø±ÙŠØ©</div>
                </div>
            </div>

            <!-- Archie's Law -->
            <div class="card">
                <h2 class="card-title">ğŸ”¬ <span data-i18n="electrical.archie">Ù‚Ø§Ù†ÙˆÙ† Ø£Ø±ØªØ´ÙŠ</span></h2>
                
                <div class="formula-box">
                    Ït = (a Ã— Rw) / (Ï†^m Ã— Sw^n)
                </div>

                <div class="input-group">
                    <label class="input-label">a (Ù…Ø¹Ø§Ù…Ù„ Ø§Ù„Ø§Ù†Ø­Ù†Ø§Ø¡)</label>
                    <input type="number" class="input-field" id="archieA" value="1" step="0.1">
                </div>

                <div class="input-group">
                    <label class="input-label">Ï† (Ø§Ù„Ù…Ø³Ø§Ù…ÙŠØ©)</label>
                    <input type="number" class="input-field" id="archiePhi" value="0.2" step="0.01" min="0" max="1">
                </div>

                <div class="input-group">
                    <label class="input-label">Sw (Ø§Ù„ØªØ´Ø¨Ø¹ Ø§Ù„Ù…Ø§Ø¦ÙŠ)</label>
                    <input type="number" class="input-field" id="archieSw" value="0.3" step="0.01" min="0" max="1">
                </div>

                <div class="input-group">
                    <label class="input-label">Rw (Ù…Ù‚Ø§ÙˆÙ…Ø© Ø§Ù„Ù…ÙŠØ§Ù‡)</label>
                    <input type="number" class="input-field" id="archieRw" value="0.05" step="0.01">
                </div>

                <button class="btn btn-secondary" onclick="calculateArchie()">
                    Ø§Ø­Ø³Ø¨ Rt
                </button>

                <div class="result-box" id="archieResult" style="display: none; background: linear-gradient(135deg, var(--secondary), #059669);">
                    <div class="result-value" id="archieValue">---</div>
                    <div class="result-label">Rt Ø§Ù„Ù…Ù‚Ø§ÙˆÙ…Ø© Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© (Î©.m)</div>
                </div>
            </div>
        </div>

        <!-- Gravity Tab -->
        <div id="gravity-tab" class="tab-content">
            <div class="card">
                <h2 class="card-title">ğŸŒ <span data-i18n="gravity.title">Ø§Ù„Ø¬Ø§Ø°Ø¨ÙŠØ©</span></h2>
                
                <div class="formula-box" id="gravityFormula">
                    g = gâ‚€(1 + Î±Â·sinÂ²Ï† + Î²Â·sinÂ²2Ï†)
                </div>

                <div class="input-group">
                    <label class="input-label" data-i18n="gravity.latitude">Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶ Ï† (Ø¯Ø±Ø¬Ø§Øª)</label>
                    <input type="number" class="input-field" id="gravLat" value="35.8775" step="0.0001">
                </div>

                <div class="input-group">
                    <label class="input-label" data-i18n="gravity.elevation">Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ h (Ù…ØªØ±)</label>
                    <input type="number" class="input-field" id="gravHeight" value="100" step="0.1">
                </div>

                <div class="input-group">
                    <label class="input-label" data-i18n="gravity.observed">Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ù‚Ø§Ø³Ø© (mGal)</label>
                    <input type="number" class="input-field" id="gravObs" value="980500" step="0.01">
                </div>

                <div class="input-group">
                    <label class="input-label" data-i18n="gravity.density">ÙƒØ«Ø§ÙØ© Ø§Ù„ØµØ®ÙˆØ± Ï (g/cmÂ³)</label>
                    <input type="number" class="input-field" id="gravDensity" value="2.67" step="0.01">
                </div>

                <button class="btn btn-secondary" onclick="calculateGravity()">
                    ğŸŒ <span data-i18n="gravity.calculate">Ø§Ø­Ø³Ø¨ Ø£Ù†ÙˆÙ…Ø§Ù„ÙŠ Ø¨ÙˆØºÙŠÙ‡</span>
                </button>

                <div class="loading" id="gravityLoading"></div>

                <div id="gravityResults" style="display: none; margin-top: 1rem;">
                    <div style="background: var(--bg-input); padding: 1rem; border-radius: 12px; margin-bottom: 0.5rem;">
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: var(--text-secondary);">Ø§Ù„Ù†Ø¸Ø±ÙŠØ©:</span>
                            <span id="gravTheoretical" style="color: var(--primary); font-weight: bold;">---</span>
                        </div>
                    </div>
                    <div style="background: var(--bg-input); padding: 1rem; border-radius: 12px; margin-bottom: 0.5rem;">
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: var(--text-secondary);">Ø§Ù„Ù‡ÙˆØ§Ø¡ Ø§Ù„Ø­Ø±:</span>
                            <span id="gravFreeAir" style="color: var(--secondary); font-weight: bold;">---</span>
                        </div>
                    </div>
                    <div style="background: var(--bg-input); padding: 1rem; border-radius: 12px; margin-bottom: 0.5rem;">
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: var(--text-secondary);">Ø§Ù„Ù‡Ø¶Ø¨Ø©:</span>
                            <span id="gravPlateau" style="color: var(--accent); font-weight: bold;">---</span>
                        </div>
                    </div>
                    <div class="result-box" style="background: linear-gradient(135deg, var(--purple), #7c3aed);">
                        <div class="result-value" id="gravAnomaly">---</div>
                        <div class="result-label">Ø£Ù†ÙˆÙ…Ø§Ù„ÙŠ Ø¨ÙˆØºÙŠÙ‡ Ø§Ù„ÙƒØ§Ù…Ù„ (mGal)</div>
                    </div>
                </div>
            </div>

            <!-- Geological Bodies -->
            <div class="card">
                <h2 class="card-title">ğŸ”ï¸ <span data-i18n="gravity.bodies">Ø£Ø¬Ø³Ø§Ù… Ø¬ÙŠÙˆÙ„ÙˆØ¬ÙŠØ©</span></h2>
                
                <div class="method-grid">
                    <button class="method-btn active" onclick="setGravityBody('sphere')">ÙƒØ±Ø©</button>
                    <button class="method-btn" onclick="setGravityBody('cylinder')">Ø£Ø³Ø·ÙˆØ§Ù†Ø©</button>
                    <button class="method-btn" onclick="setGravityBody('fault')">ÙØ§Ù„Ù‚</button>
                    <button class="method-btn" onclick="setGravityBody('cavity')">ØªØ¬ÙˆÙŠÙ</button>
                </div>

                <div class="formula-box" id="bodyFormula">
                    Î”g = (4/3)Ï€GÎ”ÏRÂ³Â·z/(zÂ²+xÂ²)^(3/2)
                </div>

                <div class="input-group">
                    <label class="input-label">Ø§Ù„Ø¹Ù…Ù‚ z (Ù…ØªØ±)</label>
                    <input type="number" class="input-field" id="bodyDepth" value="50" step="1">
                </div>

                <div class="input-group">
                    <label class="input-label">Ù†ØµÙ Ø§Ù„Ù‚Ø·Ø± R (Ù…ØªØ±)</label>
                    <input type="number" class="input-field" id="bodyRadius" value="10" step="1">
                </div>

                <div class="input-group">
                    <label class="input-label">ÙØ±Ù‚ Ø§Ù„ÙƒØ«Ø§ÙØ© Î”Ï (g/cmÂ³)</label>
                    <input type="number" class="input-field" id="bodyDensity" value="0.5" step="0.1">
                </div>

                <button class="btn btn-accent" onclick="calculateBodyEffect()">
                    Ø§Ø­Ø³Ø¨ Ø§Ù„ØªØ£Ø«ÙŠØ±
                </button>

                <div class="chart-container" id="bodyChart">
                    Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ Ø³ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§
                </div>
            </div>
        </div>

        <!-- AI Tab -->
        <div id="ai-tab" class="tab-content">
            <div class="card">
                <h2 class="card-title">ğŸ¤– <span data
